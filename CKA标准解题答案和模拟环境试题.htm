<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 15">
<meta name=Originator content="Microsoft Word 15">
<link rel=File-List
href="CKA标准解题答案和模拟环境试题.files/filelist.xml">
<link rel=Edit-Time-Data
href="CKA标准解题答案和模拟环境试题/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>qiao, xianzheng</o:Author>
  <o:LastAuthor>qiao, xianzheng</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>1473</o:TotalTime>
  <o:Created>2022-03-03T06:11:00Z</o:Created>
  <o:LastSaved>2022-03-03T06:11:00Z</o:LastSaved>
  <o:Pages>39</o:Pages>
  <o:Words>4635</o:Words>
  <o:Characters>26424</o:Characters>
  <o:Lines>220</o:Lines>
  <o:Paragraphs>61</o:Paragraphs>
  <o:CharactersWithSpaces>30998</o:CharactersWithSpaces>
  <o:Version>16.00</o:Version>
 </o:DocumentProperties>
 <o:OfficeDocumentSettings>
  <o:AllowPNG/>
 </o:OfficeDocumentSettings>
</xml><![endif]-->
<link rel=themeData
href="CKA标准解题答案和模拟环境试题/themedata.thmx">
<link rel=colorSchemeMapping
href="CKA标准解题答案和模拟环境试题/colorschememapping.xml">
<!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:TrackMoves>false</w:TrackMoves>
  <w:TrackFormatting/>
  <w:PunctuationKerning/>
  <w:DrawingGridHorizontalSpacing>5.25 磅</w:DrawingGridHorizontalSpacing>
  <w:DrawingGridVerticalSpacing>7.8 磅</w:DrawingGridVerticalSpacing>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-US</w:LidThemeOther>
  <w:LidThemeAsian>ZH-CN</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:Compatibility>
   <w:SpaceForUL/>
   <w:BalanceSingleByteDoubleByteWidth/>
   <w:DoNotLeaveBackslashAlone/>
   <w:ULTrailSpace/>
   <w:DoNotExpandShiftReturn/>
   <w:AdjustLineHeightInTable/>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
   <w:SplitPgBreakAndParaMark/>
   <w:EnableOpenTypeKerning/>
   <w:DontFlipMirrorIndents/>
   <w:OverrideTableStyleHps/>
   <w:UseFELayout/>
  </w:Compatibility>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="&#45;-"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="false"
  DefSemiHidden="false" DefQFormat="false" DefPriority="99"
  LatentStyleCount="376">
  <w:LsdException Locked="false" Priority="0" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 7"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 8"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index 9"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" Name="toc 9"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Normal Indent"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="footnote text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="annotation text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="header"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="footer"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="index heading"/>
  <w:LsdException Locked="false" Priority="35" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="table of figures"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="envelope address"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="envelope return"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="footnote reference"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="annotation reference"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="line number"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="page number"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="endnote reference"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="endnote text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="table of authorities"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="macro"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="toa heading"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Bullet"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Number"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Bullet 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Bullet 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Bullet 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Bullet 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Number 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Number 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Number 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Number 5"/>
  <w:LsdException Locked="false" Priority="10" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Closing"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Signature"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="true"
   UnhideWhenUsed="true" Name="Default Paragraph Font"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text Indent"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Continue"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Continue 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Continue 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Continue 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="List Continue 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Message Header"/>
  <w:LsdException Locked="false" Priority="11" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Salutation"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Date"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text First Indent"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text First Indent 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Note Heading"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text Indent 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Body Text Indent 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Block Text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Hyperlink"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="FollowedHyperlink"/>
  <w:LsdException Locked="false" Priority="22" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Document Map"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Plain Text"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="E-mail Signature"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Top of Form"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Bottom of Form"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Normal (Web)"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Acronym"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Address"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Cite"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Code"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Definition"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Keyboard"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Preformatted"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Sample"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Typewriter"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="HTML Variable"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Normal Table"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="annotation subject"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="No List"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Outline List 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Outline List 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Outline List 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Simple 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Simple 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Simple 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Classic 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Classic 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Classic 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Classic 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Colorful 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Colorful 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Colorful 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Columns 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 7"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Grid 8"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 4"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 5"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 7"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table List 8"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table 3D effects 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table 3D effects 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table 3D effects 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Contemporary"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Elegant"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Professional"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Subtle 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Subtle 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Web 1"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Web 2"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Web 3"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Balloon Text"/>
  <w:LsdException Locked="false" Priority="39" Name="Table Grid"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Table Theme"/>
  <w:LsdException Locked="false" SemiHidden="true" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" SemiHidden="true" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" QFormat="true"
   Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" QFormat="true"
   Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" QFormat="true"
   Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" QFormat="true"
   Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" QFormat="true"
   Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" QFormat="true"
   Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" SemiHidden="true"
   UnhideWhenUsed="true" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" SemiHidden="true"
   UnhideWhenUsed="true" QFormat="true" Name="TOC Heading"/>
  <w:LsdException Locked="false" Priority="41" Name="Plain Table 1"/>
  <w:LsdException Locked="false" Priority="42" Name="Plain Table 2"/>
  <w:LsdException Locked="false" Priority="43" Name="Plain Table 3"/>
  <w:LsdException Locked="false" Priority="44" Name="Plain Table 4"/>
  <w:LsdException Locked="false" Priority="45" Name="Plain Table 5"/>
  <w:LsdException Locked="false" Priority="40" Name="Grid Table Light"/>
  <w:LsdException Locked="false" Priority="46" Name="Grid Table 1 Light"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark"/>
  <w:LsdException Locked="false" Priority="51" Name="Grid Table 6 Colorful"/>
  <w:LsdException Locked="false" Priority="52" Name="Grid Table 7 Colorful"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 1"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 1"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 1"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 1"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 1"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 2"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 2"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 2"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 2"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 2"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 3"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 3"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 3"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 3"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 3"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 4"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 4"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 4"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 4"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 4"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 5"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 5"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 5"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 5"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 5"/>
  <w:LsdException Locked="false" Priority="46"
   Name="Grid Table 1 Light Accent 6"/>
  <w:LsdException Locked="false" Priority="47" Name="Grid Table 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="48" Name="Grid Table 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="49" Name="Grid Table 4 Accent 6"/>
  <w:LsdException Locked="false" Priority="50" Name="Grid Table 5 Dark Accent 6"/>
  <w:LsdException Locked="false" Priority="51"
   Name="Grid Table 6 Colorful Accent 6"/>
  <w:LsdException Locked="false" Priority="52"
   Name="Grid Table 7 Colorful Accent 6"/>
  <w:LsdException Locked="false" Priority="46" Name="List Table 1 Light"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark"/>
  <w:LsdException Locked="false" Priority="51" Name="List Table 6 Colorful"/>
  <w:LsdException Locked="false" Priority="52" Name="List Table 7 Colorful"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 1"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 1"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 1"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 1"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 1"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 2"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 2"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 2"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 2"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 2"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 3"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 3"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 3"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 3"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 3"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 4"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 4"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 4"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 4"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 4"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 5"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 5"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 5"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 5"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 5"/>
  <w:LsdException Locked="false" Priority="46"
   Name="List Table 1 Light Accent 6"/>
  <w:LsdException Locked="false" Priority="47" Name="List Table 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="48" Name="List Table 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="49" Name="List Table 4 Accent 6"/>
  <w:LsdException Locked="false" Priority="50" Name="List Table 5 Dark Accent 6"/>
  <w:LsdException Locked="false" Priority="51"
   Name="List Table 6 Colorful Accent 6"/>
  <w:LsdException Locked="false" Priority="52"
   Name="List Table 7 Colorful Accent 6"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Mention"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Smart Hyperlink"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Hashtag"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Unresolved Mention"/>
  <w:LsdException Locked="false" SemiHidden="true" UnhideWhenUsed="true"
   Name="Smart Link"/>
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:等线;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:DengXian;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:-1610612033 953122042 22 0 262159 0;}
@font-face
	{font-family:"等线 Light";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:-1610612033 953122042 22 0 262159 0;}
@font-face
	{font-family:"\@等线";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:-1610612033 953122042 22 0 262159 0;}
@font-face
	{font-family:"\@等线 Light";
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:-1610612033 953122042 22 0 262159 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	font-family:等线;
	mso-ascii-font-family:等线;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:等线;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:等线;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
h1
	{mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-link:"标题 1 字符";
	mso-style-next:正文;
	margin-top:17.0pt;
	margin-right:0cm;
	margin-bottom:16.5pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:240%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:22.0pt;
	font-family:等线;
	mso-ascii-font-family:等线;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:等线;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:等线;
	mso-hansi-theme-font:minor-latin;
	mso-font-kerning:22.0pt;}
h2
	{mso-style-priority:9;
	mso-style-qformat:yes;
	mso-style-link:"标题 2 字符";
	mso-style-next:正文;
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:173%;
	mso-pagination:lines-together;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:16.0pt;
	font-family:"等线 Light";
	mso-ascii-font-family:"等线 Light";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"等线 Light";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"等线 Light";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	mso-font-kerning:1.0pt;}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-link:"批注文字 字符";
	margin:0cm;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	font-family:等线;
	mso-ascii-font-family:等线;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:等线;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:等线;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-priority:99;
	mso-style-link:"页眉 字符";
	margin:0cm;
	text-align:center;
	mso-pagination:none;
	tab-stops:center 207.65pt right 415.3pt;
	layout-grid-mode:char;
	border:none;
	mso-border-bottom-alt:solid windowtext .75pt;
	padding:0cm;
	mso-padding-alt:0cm 0cm 1.0pt 0cm;
	font-size:9.0pt;
	font-family:等线;
	mso-ascii-font-family:等线;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:等线;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:等线;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-priority:99;
	mso-style-link:"页脚 字符";
	margin:0cm;
	mso-pagination:none;
	tab-stops:center 207.65pt right 415.3pt;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:等线;
	mso-ascii-font-family:等线;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:等线;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:等线;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
span.MsoCommentReference
	{mso-style-noshow:yes;
	mso-style-priority:99;
	mso-ansi-font-size:10.5pt;
	mso-bidi-font-size:10.5pt;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:#0563C1;
	mso-themecolor:hyperlink;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-noshow:yes;
	mso-style-priority:99;
	color:#954F72;
	mso-themecolor:followedhyperlink;
	text-decoration:underline;
	text-underline:single;}
p.MsoCommentSubject, li.MsoCommentSubject, div.MsoCommentSubject
	{mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-parent:批注文字;
	mso-style-link:"批注主题 字符";
	mso-style-next:批注文字;
	margin:0cm;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	font-family:等线;
	mso-ascii-font-family:等线;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:等线;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:等线;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;
	font-weight:bold;}
p.MsoNoSpacing, li.MsoNoSpacing, div.MsoNoSpacing
	{mso-style-priority:1;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	font-family:等线;
	mso-ascii-font-family:等线;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:等线;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:等线;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{mso-style-priority:34;
	mso-style-unhide:no;
	mso-style-qformat:yes;
	margin:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:21.0pt;
	mso-char-indent-count:2.0;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	font-family:等线;
	mso-ascii-font-family:等线;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:等线;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:等线;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;
	mso-font-kerning:1.0pt;}
span.a
	{mso-style-name:"页眉 字符";
	mso-style-priority:99;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:页眉;
	mso-ansi-font-size:9.0pt;
	mso-bidi-font-size:9.0pt;}
span.a0
	{mso-style-name:"页脚 字符";
	mso-style-priority:99;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:页脚;
	mso-ansi-font-size:9.0pt;
	mso-bidi-font-size:9.0pt;}
span.1
	{mso-style-name:"标题 1 字符";
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"标题 1";
	mso-ansi-font-size:22.0pt;
	mso-bidi-font-size:22.0pt;
	mso-font-kerning:22.0pt;
	font-weight:bold;}
span.2
	{mso-style-name:"标题 2 字符";
	mso-style-priority:9;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:"标题 2";
	mso-ansi-font-size:16.0pt;
	mso-bidi-font-size:16.0pt;
	font-family:"等线 Light";
	mso-ascii-font-family:"等线 Light";
	mso-ascii-theme-font:major-latin;
	mso-fareast-font-family:"等线 Light";
	mso-fareast-theme-font:major-fareast;
	mso-hansi-font-family:"等线 Light";
	mso-hansi-theme-font:major-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:major-bidi;
	font-weight:bold;}
span.a1
	{mso-style-name:"批注文字 字符";
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:批注文字;}
span.a2
	{mso-style-name:"批注主题 字符";
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-parent:"批注文字 字符";
	mso-style-link:批注主题;
	font-weight:bold;}
.MsoChpDefault
	{mso-style-type:export-only;
	mso-default-props:yes;
	font-family:等线;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;}
 /* Page Definitions */
 @page
	{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;
	mso-footnote-separator:url("CKA标准解题答案和模拟环境试题/header.htm") fs;
	mso-footnote-continuation-separator:url("CKA标准解题答案和模拟环境试题/header.htm") fcs;
	mso-endnote-separator:url("CKA标准解题答案和模拟环境试题/header.htm") es;
	mso-endnote-continuation-separator:url("CKA标准解题答案和模拟环境试题/header.htm") ecs;}
@page WordSection1
	{size:842.0pt 1190.4pt;
	margin:72.0pt 54.0pt 72.0pt 54.0pt;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-even-header:url("CKA标准解题答案和模拟环境试题/header.htm") eh1;
	mso-header:url("CKA标准解题答案和模拟环境试题/header.htm") h1;
	mso-even-footer:url("CKA标准解题答案和模拟环境试题/header.htm") ef1;
	mso-footer:url("CKA标准解题答案和模拟环境试题/header.htm") f1;
	mso-first-header:url("CKA标准解题答案和模拟环境试题/header.htm") fh1;
	mso-first-footer:url("CKA标准解题答案和模拟环境试题/header.htm") ff1;
	mso-paper-source:0;
	layout-grid:15.6pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 @list l0
	{mso-list-id:672532601;
	mso-list-type:hybrid;
	mso-list-template-ids:-2053593108 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l0:level2
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l0:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:63.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l0:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l0:level5
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l0:level6
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:126.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l0:level7
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l0:level8
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l0:level9
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:189.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l1
	{mso-list-id:998189392;
	mso-list-type:hybrid;
	mso-list-template-ids:927774950 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:21.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l1:level2
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l1:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:63.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l1:level4
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:84.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l1:level5
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:105.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l1:level6
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:126.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l1:level7
	{mso-level-number-format:bullet;
	mso-level-text:\F06C;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:147.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l1:level8
	{mso-level-number-format:bullet;
	mso-level-text:\F06E;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:168.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
@list l1:level9
	{mso-level-number-format:bullet;
	mso-level-text:\F075;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	margin-left:189.0pt;
	text-indent:-21.0pt;
	font-family:Wingdings;}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:普通表格;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-pagination:widow-orphan;
	font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	font-family:等线;
	mso-ascii-font-family:等线;
	mso-ascii-theme-font:minor-latin;
	mso-fareast-font-family:等线;
	mso-fareast-theme-font:minor-fareast;
	mso-hansi-font-family:等线;
	mso-hansi-theme-font:minor-latin;
	mso-font-kerning:1.0pt;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2049"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=ZH-CN link="#0563C1" vlink="#954F72" style='tab-interval:21.0pt;
word-wrap:break-word;text-justify-trim:punctuation'>

<div class=WordSection1 style='layout-grid:15.6pt'>

<h1><span lang=EN-US>1</span>、<a name="_Hlk95927487">权限控制 <span lang=EN-US>RBAC</span></a>（真题第<span
lang=EN-US>1</span>题）</h1>

<p class=MsoNormal>参考链接（没必要看）</p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kubernetes.io/zh/docs/reference/access-authn-authz/rbac"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>http://kubernetes.io/zh/docs/reference/access-authn-authz/rbac</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@node-1] $ kubectl config
use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Context<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>为部署流水线创建一个新的<span lang=EN-US style='color:#0070C0'>ClusterRole</span>并将其绑定到范围为特定的<span
lang=EN-US> namespace </span>的特定<span lang=EN-US style='color:#0070C0'>ServiceAccount</span>。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>创建一个名为<span lang=EN-US style='color:#0070C0'>deployment-clusterrole</span>且仅允许创建以下资源类型的新<span
lang=EN-US style='color:#0070C0'>ClusterRole</span>：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#0070C0'>Deployment<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#0070C0'>StatefulSet<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#0070C0'>DaemonSet<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>在现有的<span lang=EN-US> namespace <span style='color:#0070C0'>app-team1</span></span>中创建一个名为<span
lang=EN-US style='color:#0070C0'>cicd-token</span>的新 <span lang=EN-US
style='color:#0070C0'>ServiceAccount</span>。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>限于<span lang=EN-US> namespace <span style='color:#0070C0'>app-team1</span></span>中，将新的<span
lang=EN-US>ClusterRole <span style='color:#0070C0'>deployment-clusterrole</span></span>绑定到新的<span
lang=EN-US> ServiceAccount <span style='color:#0070C0'>cicd-token</span></span>。<span
lang=EN-US><o:p></o:p></span></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>考点：<span
lang=EN-US>RBAC</span>授权模型的理解。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl create clusterrole <span
style='color:red'>deployment-clusterrole</span> --verb=<span style='color:red'>create</span>
--resource=<span style='color:red'>deployments,statefulsets,daemonsets</span><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl <span style='color:red'>-n
app-team1</span> create <span style='color:red'>serviceaccount cicd-token</span><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>题目中要求“限于<span lang=EN-US>namespace app-team1</span>中”，则创建<span
lang=EN-US style='color:#00B050'>rolebinding</span>。没有要去，则创建<span lang=EN-US
style='color:#00B050'>clusterrolebinding</span>。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl <span style='color:red'>-n
app-team1</span> create <span style='color:#00B050'>rolebinding </span><a
name="_Hlk96540340">cicd-token-rolebinding</a> <span style='color:red'>--clusterrole=deployment-clusterrole</span>
<span style='color:red'>--serviceaccount=app-team1:cicd-token<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># <span style='color:#00B050'>rolebinding</span></span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>后面的名字<span lang=EN-US>cicd-token-rolebinding</span>随便起的，因为题目中没有要求，如果题目中有要求，就不能随便起了。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl -n app-team1 describe
rolebinding cicd-token-rolebinding<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>2</span>、查看 <span lang=EN-US>pod </span>的 <span
lang=EN-US>CPU</span>（真题第<span lang=EN-US>16</span>题）</h1>

<p class=MsoNormal>参考链接（没必要看）</p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kubernetes.io/zh/docs/reference/kubectl/cheatsheet"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>http://kubernetes.io/zh/docs/reference/kubectl/cheatsheet</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@node-1] $ kubectl config
use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>通过<span lang=EN-US> pod label<span style='color:#0070C0'> <a
name="_Hlk81955516">name=cpu-loader</a></span></span><span style='mso-bookmark:
_Hlk81955516'></span>，找到运行时占用大量<span lang=EN-US> CPU </span>的<span lang=EN-US>
pod</span>， <span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>并将占用<span lang=EN-US> CPU </span>最高的<span lang=EN-US> pod </span>名称写入文件
<a name="_Hlk82030330"><span lang=EN-US style='color:#0070C0'>/opt/KUTR000401/KUTR00401.txt</span></a>（已存在）。<span
lang=EN-US><o:p></o:p></span></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>考点：<span
lang=EN-US>kubectl top --l </span>命令的使用<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>查看<span lang=EN-US>pod</span>名称 <span lang=EN-US>-A</span>是所有<span
lang=EN-US>namespace<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl top pod -l <span
style='color:red'>name=cpu-loader</span> --sort-by=<span style='color:red'>cpu</span>
-A<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>将<span lang=EN-US>cpu</span>占用最多的<span lang=EN-US>pod</span>的<span
lang=EN-US>name</span>写入<span lang=EN-US>/opt/test1.txt</span>文件<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US>echo
&quot;</span>查出来的<span lang=EN-US>Pod Name&quot; &gt;
/opt/KUTR000401/KUTR00401.txt</span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'>检查</p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US>cat /opt/KUTR000401/KUTR00401.txt</span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>


<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>3</span>、<a name="_Hlk95927474">配置网络策略<span lang=EN-US>
NetworkPolicy</span></a>（真题第<span lang=EN-US>5</span>题）</h1>

<p class=MsoNormal><span style='color:red'>参考链接（需要复制网页内容）<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kubernetes.io/zh/docs/concepts/services-networking/network-policies"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>http://kubernetes.io/zh/docs/concepts/services-networking/network-policies</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@node-1] $ kubectl config
use-context hk8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task - 1</span></b><b><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>（可能会考的问题<span lang=EN-US>1</span>）<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>在现有的<span lang=EN-US>namespace <a name="_Hlk82010596"><span
style='color:#0070C0'>my-app</span></a></span><span style='mso-bookmark:_Hlk82010596'></span>中创建一个名为<span
lang=EN-US style='color:#0070C0'>allow-port-from-namespace</span>的新<span
lang=EN-US style='color:#0070C0'>NetworkPolicy</span>。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>确保新的<span lang=EN-US style='color:#0070C0'>NetworkPolicy</span>允许<span
lang=EN-US>namespace <span style='color:#0070C0'>echo</span></span>中的<span
lang=EN-US>Pods</span>连接到<span lang=EN-US>namespace <span style='color:#0070C0'>my-app</span></span>中的<span
lang=EN-US>Pods</span>的<span lang=EN-US style='color:#0070C0'>9000</span>端口。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>进一步确保新的<span lang=EN-US>NetworkPolicy</span>：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>不允许</span></b><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>对没有在监听
端口<span lang=EN-US style='color:#0070C0'>9000</span>的<span lang=EN-US>Pods</span>的访问<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>不允许</span></b><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>非来自 <span
lang=EN-US>namespace <span style='color:#0070C0'>echo</span></span>中的<span
lang=EN-US>Pods</span>的访问<span lang=EN-US><o:p></o:p></span></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>考点：<span
lang=EN-US>NetworkPolicy </span>的创建<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context hk8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>参考官方文档，拷贝<span lang=EN-US>yaml</span>文件内容，并修改。<span lang=EN-US><o:p></o:p></span></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#0070C0'>所以不要搞混了。他们其实只是个名字而已，叫什么都无所谓，但要分清访问和被访问。</span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>查看所有<span lang=EN-US>ns</span>的标签<span lang=EN-US>label<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get ns --show-labels<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>如果访问者的<span lang=EN-US>namespace</span>没有标签<span lang=EN-US>label</span>，则需要手动打一个。如果有一个独特的标签<span
lang=EN-US>label</span>，则也可以直接使用。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl label ns echo project=echo<o:p></o:p></span></p>


<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>编写一个<span lang=EN-US>yaml</span>文件<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>vim networkpolicy.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>#</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>注意 <span lang=EN-US>:set paste</span>，防止<span lang=EN-US>yaml</span>文件空格错序。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>apiVersion: networking.k8s.io/v1<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kind: NetworkPolicy<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>metadata:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>name: <span style='color:red'>allow-port-from-namespace</span><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>namespace: <span style='color:red'>my-app<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>#</span></span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>被访问者的命名空间<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>spec:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'><span
style='mso-spacerun:yes'>&nbsp; </span>podSelector:<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><a
name="_Hlk96541497">#</a></span><span style='mso-bookmark:_Hlk96541497'><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>这两行必须要写，或者也可以写成一行为<span
lang=EN-US>podSelector: {}</span></span></span><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>matchLabels: {}<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>policyTypes:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>- Ingress<span style='mso-spacerun:yes'>&nbsp;&nbsp; </span>#</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>策略影响入栈流量<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>ingress:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>- from:<span style='mso-spacerun:yes'>&nbsp;&nbsp; </span>#</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>允许流量的来源<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>- namespaceSelector:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>matchLabels:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='color:red'>project: echo<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>#</span></span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>访问者的命名空间的标签<span lang=EN-US>label<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#AEAAAA;mso-themecolor:background2;
mso-themeshade:191'><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>#-
podSelector: {}<span style='mso-spacerun:yes'>&nbsp; </span></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;color:#00B050'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;</span>#</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#00B050'>注意，这个不写。如果<span lang=EN-US>ingress</span>里也写了<span
lang=EN-US>- podSelector: {}</span>，则会导致<span lang=EN-US>my-app</span>中的<span
lang=EN-US>pod</span>可以访问<span lang=EN-US>my-app</span>中<span lang=EN-US>pod</span>的<span
lang=EN-US>9000</span>了，这样不满足题目要求不允许非来自<span lang=EN-US> namespace echo</span>中的<span
lang=EN-US>Pods</span>的访问。而这道题有两种问法，在下面的<span lang=EN-US>Task-2</span>里，是需要写的。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>ports:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>- protocol: TCP<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>port: <span
style='color:red'>9000<span style='mso-spacerun:yes'>&nbsp; </span>#</span></span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>被访问者公开的端口 <span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>创建<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl apply -f networkpolicy.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>


<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl describe networkpolicy -n my-app<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>


<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@node-1] $ kubectl config
use-context hk8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task - 2</span></b><b><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>（可能会考的问题<span lang=EN-US>2</span>）<span
lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><a name="_Hlk82084093"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>在现有的<span lang=EN-US>namespace <span
style='color:#0070C0'>internal</span></span>中创建一个名为<span lang=EN-US
style='color:#0070C0'>allow-port-from-namespace-2</span>的新<span lang=EN-US
style='color:#0070C0'>NetworkPolicy</span>。<span lang=EN-US><o:p></o:p></span></span></a></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk82084093'><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>确保新的<span
lang=EN-US style='color:#0070C0'>NetworkPolicy</span>允许命名空间<span lang=EN-US
style='color:#0070C0'>internal</span>中的<span lang=EN-US>Pods</span>能访问<span
style='color:#0070C0'>相同命名空间</span>下的所有<span lang=EN-US>Pods</span>的<span
lang=EN-US style='color:#0070C0'>8080</span>端口。<span lang=EN-US><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk82084093'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk82084093'><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>进一步确保新的<span
lang=EN-US>NetworkPolicy</span>：<span lang=EN-US><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk82084093'><b><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>不允许</span></b></span><span
style='mso-bookmark:_Hlk82084093'><span style='mso-ascii-font-family:等线;
mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>对没有在监听 端口<span lang=EN-US style='color:#0070C0'>8080</span>的<span
lang=EN-US>Pods</span>的访问<span lang=EN-US><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk82084093'><b><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>不允许</span></b></span><span
style='mso-bookmark:_Hlk82084093'><span style='mso-ascii-font-family:等线;
mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>非来自 <span lang=EN-US>namespace <span style='color:#0070C0'>internal</span></span>中的<span
lang=EN-US>Pods</span>的访问<span lang=EN-US><o:p></o:p></span></span></span></p>

</div>

<span style='mso-bookmark:_Hlk82084093'></span>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:red'>Task1</span><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:red'>和<span lang=EN-US>Task2</span>的区别在于，一个允许其他命名空间访问，一个允许相同命名空间访问。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>参考官方文档，拷贝<span lang=EN-US>yaml</span>文件内容，并修改。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context hk8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>vim networkpolicy-2.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>#</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>注意 <span lang=EN-US>:set paste</span>，防止<span lang=EN-US>yaml</span>文件空格错序。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>apiVersion: networking.k8s.io/v1<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kind: NetworkPolicy<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>metadata:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>name: <span style='color:red'>allow-port-from-namespace-2<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>namespace: <a name="_Hlk96541500"><span style='color:red'>internal</span></a><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>spec:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'><span
style='mso-spacerun:yes'>&nbsp; </span>podSelector:<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>#</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>这两行必须要写，或者也可以写成一行为<span
lang=EN-US>podSelector: {}<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>matchLabels: {}<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>policyTypes:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>- Ingress<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>ingress:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>- from:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>- podSelector: {}<span
style='mso-spacerun:yes'>&nbsp; </span>#</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#00B050'>必须要写，这样才能满足<span lang=EN-US>internal</span>命名空间下的所有<span
lang=EN-US>Pods</span>可以互相访问<span lang=EN-US>8080</span>端口。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>ports:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>- protocol: TCP<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>port: <span
style='color:red'>8080<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>创建<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl apply -f networkpolicy-2.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>


<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>4</span>、暴露服务<span lang=EN-US> service</span>（真题第<span
lang=EN-US>6</span>题）</h1>

<p class=MsoNormal><span style='color:red'>参考链接（需要复制网页内容）<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kubernetes.io/zh/docs/concepts/workloads/controllers/deployment"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>http://kubernetes.io/zh/docs/concepts/workloads/controllers/deployment</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@node-1] $ kubectl config
use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>请重新配置现有的部署<span lang=EN-US style='color:#0070C0'>front-end</span>以及添加名为<span
lang=EN-US style='color:#0070C0'>http</span>的端口规范来公开现有容器 <span lang=EN-US
style='color:#0070C0'>nginx </span>的端口<span lang=EN-US style='color:#0070C0'>80/tcp</span>。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>创建一个名为<span lang=EN-US style='color:#0070C0'>front-end-svc</span>的新服务，以公开容器端口<span
lang=EN-US style='color:#0070C0'>http</span>。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>配置此服务，以通过在排定的节点上的<span lang=EN-US> NodePort </span>来公开各个<span
lang=EN-US> Pods</span>。<span lang=EN-US><o:p></o:p></span></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>考点：将现有的<span
lang=EN-US>deploy</span>暴露成<span lang=EN-US>nodeport</span>的<span lang=EN-US>service</span>。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查<span lang=EN-US>deployment</span>信息<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get deploy front-end<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>参考官方文档，按照需要<span lang=EN-US>edit deployment</span>，添加端口信息<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl edit deployment <span
style='color:red'>front-end<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>#</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>注意 <span lang=EN-US>:set paste</span>，防止<span lang=EN-US>yaml</span>文件空格错序。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><a name="_Hlk90630189"><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>spec:<o:p></o:p></span></a></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk90630189'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>containers:<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk90630189'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>- image: vicuu/nginx:hello<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk90630189'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>imagePullPolicy: IfNotPresent<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk90630189'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#00B0F0'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span
style='mso-bookmark:_Hlk90630189'><span lang=EN-US style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#00B050'>name: nginx </span></span><span style='mso-bookmark:
_Hlk90630189'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#00B0F0'><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;</span>#</span></span><span
style='mso-bookmark:_Hlk90630189'><span style='mso-ascii-font-family:等线;
mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#00B0F0'>找到此位置。下文会简单说明一下<span lang=EN-US>yaml</span>文件的格式，不懂<span
lang=EN-US>yaml</span>格式的，往下看。<span lang=EN-US><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk90630189'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:red'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>ports:<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>#</span></span><span style='mso-bookmark:_Hlk90630189'><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>添加这<span lang=EN-US>4</span>行<span
lang=EN-US><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk90630189'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:red'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>-
name: http<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk90630189'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:red'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>containerPort: 80<o:p></o:p></span></span></p>

<span style='mso-bookmark:_Hlk90630189'></span>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>protocol: TCP<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>暴露对应端口<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl expose deployment front-end
--type=NodePort <span style='color:red'>--port=80 --target-port=80</span>
--name=<span style='color:red'>front-end-svc<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>


<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get pod,svc -o wide<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>curl </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>所在的<span lang=EN-US>node</span>的<span lang=EN-US>ip</span>或主机名<span
lang=EN-US>:31580<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>curl svc</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>的<span lang=EN-US>ip</span>地址<span lang=EN-US>:80<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>


<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时，如果<span lang=EN-US>curl</span>不通，简单排错后也不通，就不要过于纠结，继续往下做题即可。因为部分同学反馈<span
lang=EN-US>curl</span>不通，不清楚是否为考试集群环境的问题。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>只要确保都做对了，即使<span lang=EN-US>curl</span>不通，也最多扣<span lang=EN-US>2</span>分而已。<span
lang=EN-US><o:p></o:p></span></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>5</span>、创建 <span lang=EN-US>Ingress</span>（真题第<span
lang=EN-US>7</span>题）</h1>

<p class=MsoNormal><span style='color:red'>参考链接（需要复制网页内容）<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kubernetes.io/zh/docs/concepts/services-networking/ingress/#the-ingress-resource"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>http://kubernetes.io/zh/docs/concepts/services-networking/ingress/#the-ingress-resource</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@node-1] $ kubectl config use-context
k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>如下创建一个新的<span lang=EN-US>nginx <span style='color:#0070C0'>Ingress</span></span>资源：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>名称<span lang=EN-US>: <span style='color:#0070C0'>ping</span><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Namespace: <span style='color:#0070C0'>ing-internal</span><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>使用服务端口 <span lang=EN-US style='color:#0070C0'>5678</span>在路径 <span
lang=EN-US style='color:#0070C0'>/hello</span><span lang=EN-US> </span>上公开服务 <span
lang=EN-US style='color:#0070C0'>hello</span><span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>可以使用以下命令检查服务 <span lang=EN-US style='color:#0070C0'>hello</span>的可用性，该命令应返回
<span lang=EN-US style='color:#0070C0'>hello</span>：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>curl -kL &lt;INTERNAL_IP&gt;/hello<o:p></o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>考点：<span
lang=EN-US>Ingress</span>的创建<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>拷贝官文的<span lang=EN-US> yaml </span>案例，修改相关参数即可<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>vim ingress.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>#</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>注意 <span lang=EN-US>:set paste</span>，防止<span lang=EN-US>yaml</span>文件空格错序。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>apiVersion: networking.k8s.io/v1<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kind: Ingress<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>metadata:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>name: <span style='color:red'>ping</span><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>namespace: <span style='color:red'>ing-internal<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>annotations:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>kubernetes.io/ingress.class:
&quot;nginx&quot;<span style='mso-spacerun:yes'>&nbsp;&nbsp; </span>#</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>在<span lang=EN-US>v1.23</span>的考试中，有人反馈不加这句，<span
lang=EN-US>ingress</span>不出<span lang=EN-US>IP</span>；但是也有人反馈不加这句可以出<span
lang=EN-US>IP</span>，反而加了这句<span lang=EN-US>ingress</span>不出<span lang=EN-US>IP</span>了。我建议考试时，先不加这句，然后<span
lang=EN-US>apply</span>，等<span lang=EN-US>5</span>分钟，如果一直没有出<span lang=EN-US>IP</span>，则删除后，再加上这句，<span
lang=EN-US>apply</span>一下，如果<span lang=EN-US>5</span>分钟还是没出。只有一种可能，你别的地方写错了。如果此时你又找不出错误，我建议你将这行去掉，继续做题，不要纠结<span
lang=EN-US>1</span>分<span lang=EN-US>2</span>分的得失。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span>nginx.ingress.kubernetes.io/rewrite-target: /<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>spec:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>rules:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>- http:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>paths:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>- path: <span
style='color:red'>/hello<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>pathType: Prefix<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>backend:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>service:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>name:<span style='color:red'> hello<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>port:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>number: <span style='color:red'>5678<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>创建<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl apply -f ingress.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>通过<span lang=EN-US>get ingress </span>查看<span lang=EN-US>ingress</span>的内外<span
lang=EN-US>IP</span>，然后通过提供的<span lang=EN-US> curl </span>测试<span lang=EN-US>
ingress </span>是否正确。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>做完题后，略等<span lang=EN-US>5</span>分钟，再检查，否则可能还没获取<span lang=EN-US>IP</span>地址。或者可以先去做别的题，等都做完了，再回来检查这道题，一下，记得回来检查时，先使用<span
lang=EN-US>kubectl config use-context k8s</span>切换到此集群。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get ingress -n ing-internal<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get svc -n ingress-nginx
ingress-nginx-controller<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>curl ingress</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>的<span lang=EN-US>ip</span>地址<span
lang=EN-US>/hello<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>kubernetes.io/ingress.class:
&quot;nginx&quot;</span><span lang=EN-US style='mso-ascii-font-family:等线;
mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#AEAAAA;mso-themecolor:background2;mso-themeshade:191'> </span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;</span><span style='color:red'>#</span></span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>注意题目里的情况说明！<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:red;background:yellow;mso-highlight:yellow'>但如果你加上后，<span
lang=EN-US>apply</span>报错，提示需要安装<span lang=EN-US>ingress-nginx</span>，则去掉这行。</span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;color:red'><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:red'>或者根据这篇文章现场搭建<span lang=EN-US>https://kubernetes.github.io/ingress-nginx/deploy/#quick-start</span>。现有的考试反馈中，除了<span
lang=EN-US>1</span>人反馈异常，其他加上<span lang=EN-US>kubernetes.io/ingress.class:
&quot;nginx&quot;</span>后，都反馈正常。（不建议，考试中这么做，太耽误时间。）<span lang=EN-US><o:p></o:p></span></span></p>


<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>


<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>6</span>、扩容<span lang=EN-US> deployment</span>副本数量（真题第<span
lang=EN-US>8</span>题）</h1>

<p class=MsoNormal>参考链接（没必要看）</p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kubernetes.io/zh/docs/tasks/run-application/scale-stateful-set"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>http://kubernetes.io/zh/docs/tasks/run-application/scale-stateful-set</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@node-1] $ kubectl config
use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>将<span lang=EN-US> deployment <span
style='mso-spacerun:yes'>&nbsp;</span><span style='color:#0070C0'>presentation </span></span>扩展至<span
lang=EN-US style='color:#0070C0'> 4</span>个<span lang=EN-US> pods<o:p></o:p></span></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#0070C0'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl scale deployment <span
style='color:red'>presentation </span>--replicas=<span style='color:red'>4<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get deployments presentation -o
wide<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get pod -l app=presentation<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>7</span>、调度<span lang=EN-US> pod </span>到指定节点（真题第<span
lang=EN-US>9</span>题）</h1>

<p class=MsoNormal><span style='color:red'>参考链接（需要复制网页内容）<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kubernetes.io/zh/docs/concepts/scheduling-eviction/assign-pod-node"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>http://kubernetes.io/zh/docs/concepts/scheduling-eviction/assign-pod-node</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@node-1] $ kubectl config use-context
k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>按如下要求调度一个<span lang=EN-US> pod</span>：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>名称：<span lang=EN-US style='color:#0070C0'>nginx-kusc00401</span><span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Image</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>：<span lang=EN-US style='color:#0070C0'>nginx</span><span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Node selector</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>：<span lang=EN-US style='color:#0070C0'>disk=ssd<o:p></o:p></span></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>考点：<span
lang=EN-US>nodeSelect</span>属性的使用<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>先检查一个是否有这个<span lang=EN-US>pod</span>，应该是没有创建的，所以需要创建<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get pod -A|grep nginx-kusc00401<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>确保<span lang=EN-US>node</span>有这个<span lang=EN-US>labels</span>，考试时，检查一下就行，因为已经提前设置好了<span
lang=EN-US>labels</span>。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get nodes --show-labels|grep
'disk=ssd'<o:p></o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>拷贝官文案例，修改下<span lang=EN-US> pod </span>名称和镜像，删除多余的部分即可<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><a name="_Hlk81948222"><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>vim pod-disk-ssd.yaml<o:p></o:p></span></a></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk81948222'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>#</span></span><span
style='mso-bookmark:_Hlk81948222'><span style='mso-ascii-font-family:等线;
mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>注意 <span lang=EN-US>:set paste</span>，防止<span lang=EN-US>yaml</span>文件空格错序。<span
lang=EN-US><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk81948222'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></span></p>

<span style='mso-bookmark:_Hlk81948222'></span>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>apiVersion: v1<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kind: Pod<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>metadata:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>name: <span style='color:red'>nginx-kusc00401<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>spec:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>containers:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>- name: nginx<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>image: <span
style='color:red'>nginx<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span><span style='color:#FFC000'>#imagePullPolicy:
IfNotPresent<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>#</span></span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#FFC000'>测试环境里，加上这个字段，会快一些。否则可能会自动重新下载<span
lang=EN-US>image</span>，下载会很慢。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>nodeSelector:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span><span style='color:red'>disk:
ssd</span><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>创建<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl apply -f pod-disk-ssd.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get pod -o wide<o:p></o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>8</span>、查看可用节点（真题第<span lang=EN-US>10</span>题）</h1>

<p class=MsoNormal>参考链接（没必要看）</p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kubernetes.io/zh/docs/concepts/scheduling-eviction/taint-and-toleration"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>http://kubernetes.io/zh/docs/concepts/scheduling-eviction/taint-and-toleration</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@node-1] $ kubectl config use-context
k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查有多少<span lang=EN-US> nodes </span>已准备就绪（不包括被打上<span
lang=EN-US> Taint</span>：<span lang=EN-US style='color:#0070C0'>NoSchedule </span>的节点），
<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>并将数量写入<span lang=EN-US style='color:#0070C0'>
/opt/KUSC00402/kusc00402.txt<o:p></o:p></span></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>考点：检查节点角色标签，状态属性，污点属性的使用<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># grep</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>的<span lang=EN-US>-i</span>是忽略大小写，<span lang=EN-US>grep -v</span>是排除在外，<span
lang=EN-US>grep -c</span>是统计查出来的条数。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><a name="_Hlk96610046"><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>kubectl describe
nodes | grep -i <span style='color:red'>Taints</span></span></a><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'> | grep -vc <span
style='color:red'>NoSchedule</span><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>echo &quot;</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>查出来的数字<span lang=EN-US>&quot; &gt;
/opt/KUSC00402/kusc00402.txt<o:p></o:p></span></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>其实你直接使用如下命令，就能一眼看出来，几个没有的。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl describe nodes | grep -i Taints<o:p></o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>cat /opt/KUSC00402/kusc00402.txt<o:p></o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>9</span>、创建多容器的<span lang=EN-US> pod</span>（真题第<span
lang=EN-US>11</span>题）</h1>

<p class=MsoNormal>参考链接（没必要看）</p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kubernetes.io/zh/docs/concepts/workloads/pods"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>http://kubernetes.io/zh/docs/concepts/workloads/pods</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@node-1] $ kubectl config
use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>按如下要求调度一个<span lang=EN-US>Pod</span>：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>名称：<span lang=EN-US style='color:#0070C0'>kucc8</span><span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>app containers: <span style='color:#0070C0'>2<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>container </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>名称<span lang=EN-US>/images</span>：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l0 level1 lfo2;border:none;mso-border-alt:
solid windowtext .5pt;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings;color:#0070C0'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;color:#0070C0'>nginx<o:p></o:p></span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l0 level1 lfo2;border:none;mso-border-alt:
solid windowtext .5pt;padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><![if !supportLists]><span
lang=EN-US style='font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings;color:#0070C0'><span style='mso-list:Ignore'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span></span><![endif]><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;color:#0070C0'>consul<o:p></o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>考点：<span
lang=EN-US>pod</span>概念<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:red'>可以参考上一题“调度<span lang=EN-US>pod</span>到指定节点”的<span
lang=EN-US>yaml</span>配置文件。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>vim pod-kucc.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>#</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>注意 <span lang=EN-US>:set paste</span>，防止<span lang=EN-US>yaml</span>文件空格错序。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>apiVersion: v1<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kind: Pod<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>metadata:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>name: <span style='color:red'>kucc8<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>spec:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>containers:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>- name:<span style='color:red'> nginx<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>image: <span
style='color:red'>nginx</span><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#FFC000'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>#imagePullPolicy:
IfNotPresent<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>#</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#FFC000'>测试环境里，加上这个字段，会快一些。否则可能会自动重新下载<span
lang=EN-US>image</span>，下载会很慢。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>- name: <span style='color:red'>consul</span><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>image: <span
style='color:red'>consul</span><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#FFC000'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>#imagePullPolicy:
IfNotPresent<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>创建<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl apply -f pod-kucc.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get pod kucc8<o:p></o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>10</span>、创建<span lang=EN-US> PV</span>（真题第<span
lang=EN-US>12</span>题）</h1>

<p class=MsoNormal><span style='color:red'>参考链接（需要复制网页内容，参考第一个网址更好）<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="https://kubernetes.io/zh/docs/tasks/configure-pod-container/configure-persistent-volume-storage/#create-a-persistentvolume"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>https://kubernetes.io/zh/docs/tasks/configure-pod-container/configure-persistent-volume-storage/#create-a-persistentvolume</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kubernetes.io/zh/docs/concepts/storage/persistent-volumes"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>http://kubernetes.io/zh/docs/concepts/storage/persistent-volumes</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@node-1] $ kubectl config
use-context hk8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>创建名为 <span lang=EN-US style='color:#0070C0'>app-config</span><span
lang=EN-US> </span>的<span lang=EN-US> persistent volume</span>，容量为 <span
lang=EN-US style='color:#0070C0'>1Gi</span>，访问模式为 <span lang=EN-US
style='color:#0070C0'>ReadWriteMany</span>。 <span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>volume </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>类型为 <span lang=EN-US style='color:#0070C0'>hostPath</span>，位于 <span
lang=EN-US style='color:#0070C0'>/srv/app-config<o:p></o:p></span></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>考点：<span
lang=EN-US>hostPath</span>类型的<span lang=EN-US>pv<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 1.0pt 1.0pt 1.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>直接从官方复制合适的案例，修改参数，然后设置<span lang=EN-US> hostPath </span>为<span
lang=EN-US> /srv/app-config </span>即可。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>vim pv.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><a name="_Hlk81950215"><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>#</span></a><span
style='mso-bookmark:_Hlk81950215'><span style='mso-ascii-font-family:等线;
mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>注意 <span lang=EN-US>:set paste</span>，防止<span lang=EN-US>yaml</span>文件空格错序。<span
lang=EN-US><o:p></o:p></span></span></span></p>

<span style='mso-bookmark:_Hlk81950215'></span>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>apiVersion: v1<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kind: PersistentVolume<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>metadata:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>name: <span style='color:red'>app-config<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#AEAAAA;mso-themecolor:background2;
mso-themeshade:191'><span style='mso-spacerun:yes'>&nbsp; </span>#labels:<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span></span><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>#</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>不需要写<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#AEAAAA;mso-themecolor:background2;
mso-themeshade:191'><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>#type:
local<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>spec:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>capacity:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>storage: <span
style='color:red'>1Gi<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>accessModes:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>- ReadWriteMany<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:red'>注意，考试时的访问模式可能有<span lang=EN-US>ReadWriteMany</span>和<span
lang=EN-US>ReadOnlyMany</span>和<span lang=EN-US>ReadWriteOnce</span>，根据题目要求写。</span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>hostPath:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>path: <span
style='color:red'>&quot;/srv/app-config&quot;<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>创建<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl apply -f pv.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get pv<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># RWX</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>是<span lang=EN-US>ReadWriteMany</span>，<span lang=EN-US>RWO</span>是<span
lang=EN-US>ReadWriteOnce</span>。<span lang=EN-US><o:p></o:p></span></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 1.0pt 1.0pt 1.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>11</span>、创建 <span lang=EN-US>PVC</span>（真题第<span
lang=EN-US>13</span>题）</h1>

<p class=MsoNormal><span style='color:red'>参考链接（需要复制网页内容，参考第一个网址更好，跟创建<span
lang=EN-US>PV</span>使用同一个网址）<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="https://kubernetes.io/zh/docs/tasks/configure-pod-container/configure-persistent-volume-storage/#create-a-persistentvolume"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>https://kubernetes.io/zh/docs/tasks/configure-pod-container/configure-persistent-volume-storage/#create-a-persistentvolume</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kubernetes.io/zh/docs/concepts/storage/persistent-volumes/#persistentvolumeclaims"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>http://kubernetes.io/zh/docs/concepts/storage/persistent-volumes/#persistentvolumeclaims</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@node-1] $ kubectl config
use-context ok8s<b><o:p></o:p></b></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>创建一个新的<span lang=EN-US style='color:#0070C0'>PersistentVolumeClaim</span>：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>名称<span lang=EN-US>: <span style='color:#0070C0'>pv-volume<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Class:<span style='color:#0070C0'>
csi-hostpath-sc<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>容量<span lang=EN-US>: <span style='color:#0070C0'>10Mi<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>创建一个新的<span lang=EN-US>Pod</span>，来将<span lang=EN-US
style='color:#0070C0'>PersistentVolumeClaim</span>作为<span lang=EN-US>volume</span>进行挂载：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>名称：<span lang=EN-US style='color:#0070C0'>web-server<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Image</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>：<span lang=EN-US style='color:#0070C0'>nginx</span><span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>挂载路径：<span lang=EN-US style='color:#0070C0'>/usr/share/nginx/html<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>配置新的<span lang=EN-US>Pod</span>，以对<span lang=EN-US>volume</span>具有<span
lang=EN-US style='color:#0070C0'>ReadWriteOnce</span>权限。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>最后，使用<span lang=EN-US style='color:#0070C0'>kubectl edit</span>或<span
lang=EN-US style='color:#0070C0'>kubectl patch</span>将 <span lang=EN-US
style='color:#0070C0'>PersistentVolumeClaim</span>的容量扩展为<span lang=EN-US
style='color:#0070C0'>70Mi</span>，<span style='color:#0070C0'>并记录此更改</span>。<span
lang=EN-US><o:p></o:p></span></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>考点：<span
lang=EN-US>pvc</span>的创建<span lang=EN-US>class</span>属性的使用，<span lang=EN-US>--save-config</span>记录变更<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 0cm'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context ok8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>根据官方文档复制一个<span lang=EN-US>PVC</span>配置，修改参数，不确定的地方就是用<span
lang=EN-US> kubectl </span>的<span lang=EN-US> explain </span>帮助。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>vim pvc.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>#</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>注意 <span lang=EN-US>:set paste</span>，防止<span lang=EN-US>yaml</span>文件空格错序。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>apiVersion: v1<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kind: PersistentVolumeClaim<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>metadata:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'><span
style='mso-spacerun:yes'>&nbsp; </span>name: pv-volume<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>#pvc</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>名字<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>spec:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>storageClassName: <span style='color:red'>csi-hostpath-sc<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>accessModes:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>- ReadWriteOnce<span
style='mso-spacerun:yes'>&nbsp; </span># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:red'>注意，考试时的访问模式可能有<span lang=EN-US>ReadWriteMany</span>和<span
lang=EN-US>ReadOnlyMany</span>和<span lang=EN-US>ReadWriteOnce</span>，根据题目要求写。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>resources:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>requests:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>storage: <span
style='color:red'>10Mi<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>创建<span lang=EN-US>PVC<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl create -f pvc.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get pvc<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>vim pvc-pod.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>#</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>注意 <span lang=EN-US>:set paste</span>，防止<span lang=EN-US>yaml</span>文件空格错序。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>apiVersion: v1<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kind: Pod<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>metadata:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>name: <span style='color:red'>web-server</span><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>spec:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>volumes:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>- name: <span
style='color:#00B050'>task-pv-storage<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>#</span></span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>绿色的两个<span lang=EN-US>name</span>要一样。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>persistentVolumeClaim:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'><span
style='mso-spacerun:yes'>&nbsp; </span></span><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>claimName:<span
style='color:red'> pv-volume<span style='mso-spacerun:yes'>&nbsp; </span>#</span></span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>这个要使用上面创建的<span lang=EN-US>pvc</span>名字<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span style='mso-spacerun:yes'>&nbsp;
</span>containers:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>- name: nginx<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>image: <span
style='color:red'>nginx</span><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='color:#FFC000'>#imagePullPolicy: IfNotPresent<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>#</span></span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#FFC000'>测试环境里，加上这个字段，会快一些。否则可能会自动重新下载<span
lang=EN-US>image</span>，下载会很慢。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>ports:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>-
containerPort: 80<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>name: &quot;http-server&quot;<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>volumeMounts:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>-
mountPath: <span style='color:red'>&quot;/usr/share/nginx/html&quot;<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>name: <span style='color:#00B050'>task-pv-storage<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>#</span></span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>绿色的两个<span lang=EN-US>name</span>要一样。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>创建<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl create -f pvc-pod.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get pod<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>更改大小，并记录过程。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'># </span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>将<span lang=EN-US>storage:
10Mi</span>改为<span lang=EN-US>storage: 70Mi<span
style='mso-spacerun:yes'>&nbsp; </span></span>（模拟环境里会报错，下面有解释。）<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'># </span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>注意是修改上面的</span><span
lang=EN-US style='color:#00B050'>spec:</span><span style='color:#00B050'>里面的</span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>storage:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl edit pvc pv-volume <span
style='color:red'>--save-config<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#00B050'>模拟环境使用的是<span lang=EN-US>nfs</span>做后端存储，是不支持动态扩容<span
lang=EN-US>pvc</span>的（<span lang=EN-US>:wq</span>保存退出时，会报错）。</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>所以最后一步修改为<span lang=EN-US>70Mi</span>，只是操作一下即可。换成<span
lang=EN-US>ceph</span>做后端存储，可以，但是集群资源太少，无法做<span lang=EN-US>ceph</span>。<span
lang=EN-US><o:p></o:p></span></span></p>
/p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 0cm'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>12</span>、查看 <span lang=EN-US>pod </span>日志（真题第<span
lang=EN-US>14</span>题）</h1>

<p class=MsoNormal>参考链接（没必要看）</p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kubernetes.io/zh/docs/tasks/debug-application-cluster/debug-running-pod"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>http://kubernetes.io/zh/docs/tasks/debug-application-cluster/debug-running-pod</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@node-1] $ kubectl config
use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>监控<span lang=EN-US> pod <span style='color:#0070C0'>foo </span></span>的日志并：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>提取与错误<span style='color:#0070C0'> <span lang=EN-US>RLIMIT_NOFILE</span></span>相对应的日志行<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>将这些日志行写入 <span lang=EN-US style='color:#0070C0'>/opt/KUTR00101/foo<o:p></o:p></span></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>考点：<span
lang=EN-US>kubectl logs</span>命令<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl logs <span style='color:red'>foo</span>
| grep <span style='color:red'>&quot;RLIMIT_NOFILE&quot;</span> &gt;
/opt/KUTR00101/foo<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>cat /opt/KUTR00101/foo<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>13</span>、使用 <span lang=EN-US>sidecar </span>代理容器日志（真题第<span
lang=EN-US>15</span>题）</h1>

<p class=MsoNormal><span style='color:red'>参考链接（需要复制网页内容）<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kubernetes.io/zh/docs/concepts/cluster-administration/logging"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>http://kubernetes.io/zh/docs/concepts/cluster-administration/logging</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@node-1] $ kubectl config
use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Context<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>将一个现有的<span lang=EN-US> Pod </span>集成到<span lang=EN-US>
Kubernetes </span>的内置日志记录体系结构中（例如<span lang=EN-US> kubectl logs</span>）。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>添加<span lang=EN-US> streaming sidecar </span>容器是实现此要求的一种好方法。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>使用<span lang=EN-US style='color:#0070C0'>busybox </span><span
lang=EN-US>Image</span>来将名为<span lang=EN-US style='color:#0070C0'>sidecar</span>的<span
lang=EN-US>sidecar</span>容器添加到现有的<span lang=EN-US>Pod <a name="_Hlk82008231"><span
style='color:#0070C0'>11-factor-app</span></a></span><span style='mso-bookmark:
_Hlk82008231'></span>中。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>新的<span lang=EN-US>sidecar</span>容器必须运行以下命令：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#0070C0'>/bin/sh -c tail -n+1 -f
/var/log/11-factor-app.log<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>使用挂载在<span lang=EN-US style='color:#0070C0'>/var/log</span>的<span
lang=EN-US>Volume</span>，使日志文件<span lang=EN-US style='color:#0070C0'>11-factor-app.log</span>可用于<span
lang=EN-US>sidecar </span>容器。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>除了添加所需要的<span lang=EN-US>volume mount</span>以外，请勿更改现有容器的规格。<span
lang=EN-US><o:p></o:p></span></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#0070C0'>真题的翻译的不好，整理一下，就是：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#0070C0'>添加一个 名字为</span><span lang=EN-US style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:red'>sidecar</span><span lang=EN-US style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#0070C0'> </span><span style='mso-ascii-font-family:等线;
mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#0070C0'>的<span lang=EN-US> sidecar </span>容器<span
lang=EN-US>(</span>使用<span lang=EN-US>busybox </span>镜像<span lang=EN-US>)</span>到已有的<span
lang=EN-US> pod 11-factor-app </span>中<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#0070C0'>确保<span lang=EN-US> sidecar </span>容器能够输出<span lang=EN-US>
/var/log/11-factor-app.log </span>的信息<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#0070C0'>使用<span lang=EN-US> volume </span>挂载<span lang=EN-US> /var/log </span>目录，确保<span
lang=EN-US> sidecar </span>能访问<span lang=EN-US> 11-factor-app.log </span>文件<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>考点：<span
lang=EN-US>pod</span>两个容器共享存储卷<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context k8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>通过<span lang=EN-US> kubectl get pod -o yaml </span>的方法备份原始<span
lang=EN-US> pod </span>信息，删除旧的<span lang=EN-US>pod 11-factor-app<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>copy </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>一份新<span lang=EN-US> yaml </span>文件，添加 一个名称为<span lang=EN-US>
sidecar </span>的容器<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>新建<span lang=EN-US> emptyDir </span>的卷，确保两个容器都挂载了<span
lang=EN-US> /var/log </span>目录<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>新建含有<span lang=EN-US> sidecar </span>的<span lang=EN-US> pod</span>，并通过<span
lang=EN-US> kubectl logs </span>验证<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>导出这个<span lang=EN-US>pod</span>的<span lang=EN-US>yaml</span>文件<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get pod <a name="_Hlk82009376">11-factor-app</a>
-o yaml &gt; varlog.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>备份<span lang=EN-US>yaml</span>文件，防止改错了，回退。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>cp varlog.yaml varlog-bak.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>修改<span lang=EN-US>varlog.yaml</span>文件<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>vim varlog.yaml<o:p></o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>根据官方文档拷贝需要的信息，在《下面是运行两个边车容器的<span lang=EN-US> Pod </span>的配置文件》里。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'>spec:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#8496B0;mso-themecolor:text2;mso-themetint:153'>。。。。。。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span>volumeMounts:<span style='mso-spacerun:yes'>&nbsp;&nbsp; </span></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>#</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>在原配置文件，灰色的这段后面添加<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>-
mountPath: /var/run/secrets/kubernetes.io/serviceaccount<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>name:
default-token-4l6w8<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>readOnly: true<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B0F0'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>- na</span><span lang=EN-US
style='color:#00B0F0'>me: varlog</span><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span><span style='color:#00B050'>#</span></span><span
style='color:#00B050'>新加内容<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B0F0'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>mountPath:
/var/log</span><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span></span><span lang=EN-US
style='color:#00B050'>#</span><span style='color:#00B050'>新加内容<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B0F0'><span
style='mso-spacerun:yes'>&nbsp; </span>- name: </span><a name="_Hlk82092159"><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;color:red'>sidecar</span></a><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;color:red'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span></span><span lang=EN-US
style='color:#00B050'>#</span><span style='color:#00B050'>新加内容，注意 <span
lang=EN-US>name </span>别写错了</span><span lang=EN-US style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B0F0'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>image:</span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'> <span
style='color:red'>busybox<span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span></span></span><span lang=EN-US style='color:#00B050'>#</span><span
style='color:#00B050'>新加内容</span><span lang=EN-US style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B0F0'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>args: [/bin/sh, -c, 'tail
-n+1 -f </span><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:red'>/var/log/11-factor-app.log</span><span lang=EN-US style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>']<span style='mso-spacerun:yes'>&nbsp;&nbsp; </span></span><span
lang=EN-US style='color:#00B050'>#</span><span style='color:#00B050'>新加内容，注意 文件名
别写错了</span><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B0F0'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>volumeMounts: </span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;</span></span><span lang=EN-US
style='color:#00B050'>#</span><span style='color:#00B050'>新加内容</span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B0F0'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>- nam</span><span
lang=EN-US style='color:#00B0F0'>e: varlog</span><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span><span style='color:#00B050'>#</span></span><span
style='color:#00B050'>新加内容</span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B0F0'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>mountPath:
/var/log</span><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span></span><span lang=EN-US
style='color:#00B050'>#</span><span style='color:#00B050'>新加内容</span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span style='mso-spacerun:yes'>&nbsp; </span>- name:
count-log-2<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span>image: busybox<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span>args: [/bin/sh, -c, 'tail -n+1 -f /var/log/2.log']<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span>volumeMounts:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>-
name: varlog<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>mountPath:
/var/log<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span style='mso-spacerun:yes'>&nbsp; </span>volumes:<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span></span><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>#</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>在原配置文件，灰色的这段后面添加。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span style='mso-spacerun:yes'>&nbsp; </span>- name:
kube-api-access-sdk4p<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;
</span>projected:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>defaultMode: 420<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>sources:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>-
serviceAccountToken:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>expirationSeconds: 3607<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>path: token<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>- configMap:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>items:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>- key: ca.crt<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>path: ca.crt<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>name: kube-root-ca.crt<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>- downwardAPI:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>items:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>- fieldRef:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>apiVersion: v1<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>fieldPath: metadata.namespace<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#8496B0;mso-themecolor:text2;
mso-themetint:153'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>path: namespace<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B0F0'><span
style='mso-spacerun:yes'>&nbsp; </span>- name: varlog</span><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span></span><span lang=EN-US
style='color:#00B050'>#</span><span style='color:#00B050'>新加内容，注意找好位置。</span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B0F0'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>emptyDir: {}</span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span></span><span lang=EN-US
style='color:#00B050'>#</span><span style='color:#00B050'>新加内容</span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>




<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>删除原先的<span lang=EN-US>pod<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl delete pod 11-factor-app<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get pod 11-factor-app<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>新建这个<span lang=EN-US>pod<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl apply -f varlog.yaml<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'># </span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>考试时，仅使用第一条检查一下结果即可</span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl logs 11-factor-app sidecar<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl exec 11-factor-app -c sidecar --
tail -f /var/log/11-factor-app.log<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl exec 11-factor-app -c count --
tail -f /var/log/11-factor-app.log<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>


<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>





<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>14</span>、升级集群（真题第<span lang=EN-US>3</span>题）</h1>

<p class=MsoNormal>参考链接（没必要看，但命令要背过）</p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kubernetes.io/zh/docs/tasks/administer-cluster/kubeadm/kubeadm-upgrade"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>http://kubernetes.io/zh/docs/tasks/administer-cluster/kubeadm/kubeadm-upgrade</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@node-1] $ kubectl config
use-context mk8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>现有的<span lang=EN-US>Kubernetes </span>集群正在运行版本<span lang=EN-US
style='color:#0070C0'>1.23.1</span>。<b><span style='color:#0070C0'>仅将<span
lang=EN-US>master</span>节点</span></b>上的所有<span lang=EN-US> Kubernetes</span>控制平面和节点组件升级到版本<span
lang=EN-US style='color:#0070C0'>1.23.2</span>。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:red'>（注意，考试时的集群可能为<span lang=EN-US>1.23.0</span>，会让你从<span
lang=EN-US>1.23.0</span>升级为<span lang=EN-US>1.23.1</span>。甚至是<span lang=EN-US>1.22.1</span>升级为<span
lang=EN-US>1.22.2</span>。所以敲命令时，具体要升级的版本，要注意，根据题目要求更改。）</span><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>确保在升级之前<span lang=EN-US> drain master</span>节点，并在升级后<span
lang=EN-US> uncordon master</span>节点。 <span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>可以使用以下命令，通过<span lang=EN-US>ssh</span>连接到<span lang=EN-US>master</span>节点：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>ssh master01<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>可以使用以下命令，在该<span lang=EN-US>master</span>节点上获取更高权限：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>sudo -i<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>另外，在主节点上升级<span lang=EN-US style='color:#0070C0'>kubelet</span>和<span
lang=EN-US style='color:#0070C0'>kubectl</span>。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>请不要升级工作节点，<span lang=EN-US>etcd</span>，<span lang=EN-US>container
</span>管理器，<span lang=EN-US>CNI</span>插件，<span lang=EN-US> DNS</span>服务或任何其他插件。<span
lang=EN-US><o:p></o:p></span></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>考点：如何离线主机，并升级控制面板和升级节点<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context mk8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get nodes<o:p></o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'># cordon </span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>停止调度，将<span lang=EN-US>node</span>调为<span
lang=EN-US>SchedulingDisabled</span>。新<span lang=EN-US>pod</span>不会被调度到该<span
lang=EN-US>node</span>，但在该<span lang=EN-US>node</span>的旧<span lang=EN-US>pod</span>不受影响。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'># drain </span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>驱逐节点。首先，驱逐该<span
lang=EN-US>node</span>上的<span lang=EN-US>pod</span>，并在其他节点重新创建。接着，将节点调为<span
lang=EN-US> SchedulingDisabled</span>。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'># </span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>所以<span lang=EN-US>kubectl
cordon master01</span>这条，可写可不写。但我一向做事严谨，能复杂，就绝不简单了事。。。所以就写了。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><a name="_Hlk96545304"><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;color:red'>kubectl
cordon master01<o:p></o:p></span></a></p>

<span style='mso-bookmark:_Hlk96545304'></span>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>kubectl drain master01 --ignore-daemonsets<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>


<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'># ssh</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>到<span lang=EN-US>master</span>节点，并切换到<span
lang=EN-US>root</span>下<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>ssh master01<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>sudo -i<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>





<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>apt-cache show kubeadm|grep 1.23.2<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>apt-get update<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>apt-get install kubeadm=1.23.2-00<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubeadm version<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>验证升级计划<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubeadm upgrade plan<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>排除<span lang=EN-US>etcd</span>，升级其他的，提示时，输入<span lang=EN-US>y</span>。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>kubeadm upgrade apply v1.23.2 <b>--etcd-upgrade=false</b><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>




<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>升级<span lang=EN-US>kubelet<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>apt-get install kubelet=1.23.2-00<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubelet --version<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>





<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>升级<span lang=EN-US>kubectl<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>apt-get install kubectl=1.23.2-00<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl version<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>




<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'># </span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>退出<span lang=EN-US>root</span>，退回到<span
lang=EN-US>student@master01<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>exit<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'># </span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>退出<span lang=EN-US>master01</span>，退回到<span
lang=EN-US>student@node01<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>exit<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>不要输入<span lang=EN-US>exit</span>多了，否则会退出考试环境的。<span lang=EN-US><o:p></o:p></span></span></p>


<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>恢复<span lang=EN-US>master01</span>调度<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>kubectl uncordon master01<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查<span lang=EN-US>master01</span>是否为<span lang=EN-US>Ready<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get node<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>


<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>15</span>、<a name="_Hlk92748075">备份还原<span lang=EN-US>
etcd</span></a>（真题第<span lang=EN-US>4</span>题）</h1>

<p class=MsoNormal><span style='color:red'>（真实考试时，这道题是在第<span lang=EN-US>4</span>题出现，第<span
lang=EN-US>3</span>题是“升级集群”那道题。建议真正考试时，前<span lang=EN-US>4</span>道题按照顺序做，特别是第<span
lang=EN-US>4</span>题，且做完后不要再修改，具体原因，详见这道题最后里的文字说明。）<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='color:red'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='color:#7030A0'>请注意，模拟环境将这道题放在第<span lang=EN-US>15</span>题，是因为一旦还原<span
lang=EN-US>etcd</span>快照后，很多后来做的<span lang=EN-US>pod</span>会消失，导致后面的题无法正常模拟。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal>参考链接（没必要看）</p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kubernetes.io/zh/docs/tasks/administer-cluster/configure-upgrade-etcd"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>http://kubernetes.io/zh/docs/tasks/administer-cluster/configure-upgrade-etcd</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>此项目无需更改配置环境。但是，在执行此项目之前，请确保您已返回初始节点。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@master01] $ exit<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:red'>（注意，从上文可知，<span lang=EN-US>etcd</span>这道题真实考试为第<span
lang=EN-US>4</span>题，用的集群是真实考试时的上一题的集群，即真题第<span lang=EN-US>3</span>题<span
lang=EN-US>mk8s</span>，所以无需再切换集群了）<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>首先，为运行在<span lang=EN-US style='color:#0070C0'>https://11.0.1.111:2379</span>上的现有
<span lang=EN-US style='color:#0070C0'>etcd </span>实例创建快照并将快照保存到 <span
lang=EN-US style='color:#0070C0'>/var/lib/backup/etcd-snapshot.db<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:red'>（注意，真实考试中，这里写的是<span lang=EN-US>https://127.0.0.1:2379</span>）<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>为给定实例创建快照预计能在几秒钟内完成。 如果该操作似乎挂起，则命令可能有问题。用 <span lang=EN-US>CTRL
+ C </span>来取消操作，然后重试。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>然后还原位于<span lang=EN-US style='color:#0070C0'>/data/backup/etcd-snapshot-previous.db</span>的现有先前快照。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>提供了以下<span lang=EN-US>TLS</span>证书和密钥，以通过<span lang=EN-US>etcdctl</span>连接到服务器。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>CA </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>证书<span lang=EN-US>:<span style='color:#0070C0'>
/opt/KUIN00601/ca.crt<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>客户端证书<span lang=EN-US>: <span style='color:#0070C0'>/opt/KUIN00601/etcd-client.crt<o:p></o:p></span></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>客户端密钥<span lang=EN-US>: <span style='color:#0070C0'>/opt/KUIN00601/etcd-client.key</span><o:p></o:p></span></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>考点：<span
lang=EN-US>etcd</span>的备份和还原命令<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#0070C0'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:red'>注意下面<span lang=EN-US>3</span>种截然不同的做法：我推荐不是很懂<span lang=EN-US>K8S</span>的使用第<span
lang=EN-US>1</span>种方法，稳妥些。<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal><b><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:red'>对<span lang=EN-US>k8s</span>比较熟悉的，也会简单排错的人，可以选择第<span lang=EN-US>2</span>种或第<span
lang=EN-US>3</span>种方法。<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b><span style='font-size:12.0pt;mso-bidi-font-size:14.0pt;
mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>方法<span lang=EN-US>1</span>：
<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal>（非常推荐这样做）</p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#00B0F0'>网上流传最多的<span lang=EN-US>etcd</span>快照还原的步骤：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#00B0F0'>首先可以确定，网上这种做法并不准确，但确实比较保险的做法。即使错了，也不会影响其他题目，且只会扣<span
lang=EN-US>4</span>分以内。<span lang=EN-US><o:p></o:p></span></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>注意集群用的是考试时的上一题的集群，所以无需再切换集群了。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context xxxx<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>确认一下<span lang=EN-US>ssh</span>终端，是在<span lang=EN-US>[student@node-1]
$ </span>下<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>


<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>备份：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#0070C0'># </span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#0070C0'>如果不使用<span lang=EN-US>export
ETCDCTL_API=3</span>，而使用<span lang=EN-US>ETCDCTL_API=3</span>，则下面每条<span
lang=EN-US>etcdctl</span>命令前都要加<span lang=EN-US>ETCDCTL_API=3</span>。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#0070C0'># </span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#0070C0'>如果执行时，提示<span lang=EN-US>permission
denied</span>，则是权限不够，命令最前面加<span lang=EN-US>sudo</span>即可。</span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;color:red'><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>export ETCDCTL_API=3<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>etcdctl --endpoints=https://11.0.1.111:2379
--cacert=&quot;/opt/KUIN00601/ca.crt&quot;
--cert=&quot;/opt/KUIN00601/etcd-client.crt&quot;
--key=&quot;/opt/KUIN00601/etcd-client.key&quot; snapshot save
/var/lib/backup/etcd-snapshot.db<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查：（考试时，这些检查动作，都可以不做）<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>etcdctl snapshot status
/var/lib/backup/etcd-snapshot.db -wtable<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>还原：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'># </span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>考试时，<span lang=EN-US>/data/backup/etcd-snapshot-previous.db</span>的权限应该是只有<span
lang=EN-US>root</span>可读，所以需要使用<span lang=EN-US>sudo</span>命令。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'># </span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>可以<span lang=EN-US>ll
/data/backup/etcd-snapshot-previous.db</span>检查一下读写权限和属主。<span lang=EN-US><o:p></o:p></span></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'># </span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>不加<span lang=EN-US>sudo </span>会报错
<span lang=EN-US>permission denied<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>sudo ETCDCTL_API=3</span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'> etcdctl
--endpoints=https://11.0.1.111:2379 --cacert=&quot;/opt/KUIN00601/ca.crt&quot;
--cert=&quot;/opt/KUIN00601/etcd-client.crt&quot;
--key=&quot;/opt/KUIN00601/etcd-client.key&quot; snapshot restore
/data/backup/etcd-snapshot-previous.db<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;mso-no-proof:yes'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b><span style='font-size:12.0pt;mso-bidi-font-size:14.0pt;
mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>方法<span lang=EN-US>2<o:p></o:p></span></span></b></p>

<p class=MsoNormal>（建议了解<span lang=EN-US>K8S</span>原理的这么做，但前提是<span lang=EN-US>etcd</span>使用的是<span
lang=EN-US>systemd</span>服务，而不是<span lang=EN-US>etcd pod</span>。）</p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#00B0F0'>方法<span lang=EN-US>2</span>有一个前提，就是<span lang=EN-US>etcd</span>使用的是<span
lang=EN-US>systemd</span>服务，而不是<span lang=EN-US>etcd</span>容器。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#00B0F0'>1.22</span><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#00B0F0'>和<span lang=EN-US>1.23</span>的考试里，有人反馈<span lang=EN-US>etcd</span>是服务，有人反馈<span
lang=EN-US>etcd</span>是<span lang=EN-US>pod</span>。我怀疑<span lang=EN-US>CKA</span>可能有多套考试环境，所以你做的时候，需要确认是否为<span
lang=EN-US>etcd</span>服务。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#00B0F0'>这个模拟环境，使用的是<span lang=EN-US>etcd pod</span>的方式搭建的，所以不能用此方法测试。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#00B0F0'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#00B0F0'>方法<span lang=EN-US>2</span>和方法<span lang=EN-US>3</span>类似，或者说原理是相同的。而且，是可以实现真正<span
lang=EN-US>etcd</span>快照还原的步骤：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#00B0F0'>首先说一下，这种做法稍后有风险的，一旦操作错误，集群出问题，很可能影响同集群的其他考题，所以不建议冒险。<span
lang=EN-US><o:p></o:p></span></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>注意集群用的是考试时的上一题的集群，所以无需再切换集群了。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context xxxx<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>确认一下<span lang=EN-US>ssh</span>终端，是在<span lang=EN-US>[student@node-1]
$ </span>下<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>备份：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#0070C0'>#</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#0070C0'>如果不使用<span lang=EN-US>export
ETCDCTL_API=3</span>，而使用<span lang=EN-US>ETCDCTL_API=3</span>，则下面每条<span
lang=EN-US>etcdctl</span>命令前都要加<span lang=EN-US>ETCDCTL_API=3</span>。</span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;color:red'><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>export ETCDCTL_API=3<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>etcdctl --endpoints=https://11.0.1.111:2379
--cacert=&quot;/opt/KUIN00601/ca.crt&quot;
--cert=&quot;/opt/KUIN00601/etcd-client.crt&quot;
--key=&quot;/opt/KUIN00601/etcd-client.key&quot; snapshot save
/var/lib/backup/etcd-snapshot.db<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查：（考试时，这些检查动作，都可以不做）<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>etcdctl snapshot status
/var/lib/backup/etcd-snapshot.db -wtable<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>还原：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#00B050'>考试时，<span lang=EN-US>/data/backup/etcd-snapshot-previous.db</span>的权限应该是只有<span
lang=EN-US>root</span>可读，所以需要使用<span lang=EN-US>sudo</span>命令。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#00B050'>可以<span lang=EN-US>ll /data/backup/etcd-snapshot-previous.db</span>检查一下读写权限和属主。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>1</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>、先检查一下考试环境，使用的<span lang=EN-US>etcd</span>是服务还是容器。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get pod -A<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>注意加<span lang=EN-US>sudo</span>，因为你用的<span lang=EN-US>student</span>帐号，而非<span
lang=EN-US>root</span>帐号。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>sudo systemctl status etcd<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>如果是<span lang=EN-US>systemd</span>服务，则继续往下操作。（模拟环境使用的<span
lang=EN-US>etcd</span>不是服务，而是方法<span lang=EN-US>3</span>的<span lang=EN-US>pod</span>。）<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>2</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>、确认<span lang=EN-US>etcd</span>数据目录（<span lang=EN-US>--data-dir </span>值）<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>ps -ef |grep etcd<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>一般默认为<span lang=EN-US>/var/lib/etcd<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>3</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>、停止<span lang=EN-US>etcd</span>服务<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>sudo systemctl stop etcd<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>4</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>、先移动备份<span lang=EN-US>etcd</span>原目录<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>sudo mv /var/lib/etcd /var/lib/etcd.bak<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>5</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>、开始还原（还原时，可以不加证书和秘钥）<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>sudo ETCDCTL_API=3 etcdctl
--data-dir=/var/lib/etcd <span style='mso-spacerun:yes'>&nbsp;</span>snapshot
restore /data/backup/etcd-snapshot-previous.db<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>6</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>、更改文件属主<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>sudo chown -R etcd:etcd /var/lib/etcd<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>7</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>、启动<span lang=EN-US>etcd</span>服务<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>sudo systemctl start etcd<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b><span style='font-size:12.0pt;mso-bidi-font-size:14.0pt;
mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>方法<span lang=EN-US>3<o:p></o:p></span></span></b></p>

<p class=MsoNormal>（建议了解<span lang=EN-US>K8S</span>原理的用方法<span lang=EN-US>2</span>和<span
lang=EN-US>3</span>）</p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#00B0F0'>方法<span lang=EN-US>3</span>和方法<span lang=EN-US>2</span>类似，或者说原理是相同的。而且，是可以实现真正<span
lang=EN-US>etcd</span>快照还原的步骤：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#00B0F0'>首先说一下，这种做法稍后有风险的，一旦操作错误，集群出问题，很可能影响同集群的其他考题，所以不建议冒险。<span
lang=EN-US><o:p></o:p></span></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>注意集群用的是考试时的上一题的集群，所以无需再切换集群了。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context xxxx<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>确认一下<span lang=EN-US>ssh</span>终端，是在<span lang=EN-US>[student@node-1]
$ </span>下<b><span lang=EN-US><o:p></o:p></span></b></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>备份：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#0070C0'>#</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#0070C0'>如果不使用<span lang=EN-US>export
ETCDCTL_API=3</span>，而使用<span lang=EN-US>ETCDCTL_API=3</span>，则下面每条<span
lang=EN-US>etcdctl</span>命令前都要加<span lang=EN-US>ETCDCTL_API=3</span>。</span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;color:red'><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>export ETCDCTL_API=3</span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;color:#0070C0'><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>etcdctl --endpoints=https://11.0.1.111:2379
--cacert=&quot;/opt/KUIN00601/ca.crt&quot;
--cert=&quot;/opt/KUIN00601/etcd-client.crt&quot;
--key=&quot;/opt/KUIN00601/etcd-client.key&quot; snapshot save
/var/lib/backup/etcd-snapshot.db<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查：（考试时，这些检查动作，都可以不做）<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>etcdctl snapshot status
/var/lib/backup/etcd-snapshot.db -wtable<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>还原：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><a name="_Hlk88433212"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>考试时，<span lang=EN-US>/data/backup/etcd-snapshot-previous.db</span>的权限应该是只有<span
lang=EN-US>root</span>可读，所以需要使用<span lang=EN-US>sudo</span>命令。<span lang=EN-US><o:p></o:p></span></span></a></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk88433212'><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>可以<span
lang=EN-US>ll /data/backup/etcd-snapshot-previous.db</span>检查一下读写权限和属主。<span
lang=EN-US><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk88433212'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#00B0F0'><o:p>&nbsp;</o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk88433212'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#00B0F0'><o:p>&nbsp;</o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk88433212'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#00B0F0'>### </span></span><span style='mso-bookmark:_Hlk88433212'><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B0F0'>测试环境的<span lang=EN-US>etcd</span>在<span
lang=EN-US>master01</span>节点，所以需要切换到<span lang=EN-US>master</span>节点。<span
lang=EN-US><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk88433212'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#00B0F0'>### </span></span><span style='mso-bookmark:_Hlk88433212'><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B0F0'>但考试时，从考试给出的题目“为运行在<span
lang=EN-US>https://11.0.1.111:2379</span>上的现有<span lang=EN-US> etcd </span>实例创建快照”可知，<span
lang=EN-US>etcd</span>是运行在本节点<span lang=EN-US>node-1</span>上的。<span lang=EN-US><o:p></o:p></span></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk88433212'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:red'>### </span></span><span style='mso-bookmark:_Hlk88433212'><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>所以考试时，不需要切到<span lang=EN-US>master</span>。</span></span><span
style='mso-bookmark:_Hlk88433212'><span lang=EN-US style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#00B0F0'><o:p></o:p></span></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk88433212'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:red'><o:p>&nbsp;</o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk88433212'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:#7030A0'>ssh master01<span style='mso-spacerun:yes'>&nbsp; </span>#</span></span><span
style='mso-bookmark:_Hlk88433212'><span style='mso-ascii-font-family:等线;
mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#7030A0'>仅测试环境下执行切到<span lang=EN-US>master</span></span></span><span
style='mso-bookmark:_Hlk88433212'><span lang=EN-US style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:red'><o:p></o:p></span></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-bookmark:
_Hlk88433212'><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:red'><o:p>&nbsp;</o:p></span></span></p>

<span style='mso-bookmark:_Hlk88433212'></span>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>## </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>移除且备份<span lang=EN-US> /etc/kubernetes/manifests </span>目录<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>sudo mv /etc/kubernetes/manifests
/etc/kubernetes/manifests.bak<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>## </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>查看<span lang=EN-US> kube-apiserver</span>、<span lang=EN-US>etcd </span>镜像是否停止<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>docker ps|grep etcd &amp;&amp; docker ps|grep
kube-apiserver<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>## </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>备份现有<span lang=EN-US> Etcd </span>数据<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>sudo mv /var/lib/etcd /var/lib/etcd.bak<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>##</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始还原（还原时，可以不加证书和秘钥）<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>sudo ETCDCTL_API=3</span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'> etcdctl
--endpoints=https://127.0.0.1:2379 --cacert=&quot;/opt/KUIN00601/ca.crt&quot;
--cert=&quot;/opt/KUIN00601/etcd-client.crt&quot;
--key=&quot;/opt/KUIN00601/etcd-client.key&quot; snapshot restore
/data/backup/etcd-snapshot-previous.db --data-dir=/var/lib/etcd/<span
style='color:red'><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>（之前备份的<span lang=EN-US>HASH</span>为<span lang=EN-US>68a972d6</span>）<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>## </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>恢复<span lang=EN-US> Kube-Apiserver </span>与<span lang=EN-US>
Etcd </span>镜像<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>sudo mv /etc/kubernetes/manifests.bak
/etc/kubernetes/manifests<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#7030A0'>### </span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#7030A0'>退回<span lang=EN-US>node01<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#7030A0'>exit<span
style='mso-spacerun:yes'>&nbsp; </span>#</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#7030A0'>仅测试环境下执行，因为考试时，你没有切到<span lang=EN-US>master</span>下，而是一直在<span
lang=EN-US>node-1</span>下的。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#7030A0'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>## </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>稍等<span lang=EN-US>3</span>分钟，再检查<span lang=EN-US>pod</span>。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>## </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>因为太快检查，可能会提示“<span lang=EN-US>The connection to the server
11.0.1.111:6443 was refused - did you specify the right host or port?</span>”<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#0070C0'>## </span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#0070C0'>成功还原到了一个比较早的<span
lang=EN-US>etcd</span>快照，之前的很多<span lang=EN-US>pod</span>都没有了。比如查看<span
lang=EN-US>pud</span>的<span lang=EN-US>CPU</span>的那道题的<span lang=EN-US>pod</span>，<span
lang=EN-US>redis-test</span>和<span lang=EN-US>nginx-host</span>等都没有了。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get pod -A<o:p></o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>


<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast;
color:red'><o:p>&nbsp;</o:p></span></p>








<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>16</span>、节点维护（真题第<span lang=EN-US>2</span>题）</h1>

<p class=MsoNormal>参考链接（没必要看）</p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kubernetes.io/zh/docs/tasks/administer-cluster/safely-drain-node"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>http://kubernetes.io/zh/docs/tasks/administer-cluster/safely-drain-node</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@node-1] $ kubectl config
use-context ek8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>将名为 <span lang=EN-US style='color:#0070C0'>node02</span><span
lang=EN-US> </span>的<span lang=EN-US> node </span>设置为不可用，并重新调度该<span
lang=EN-US> node </span>上所有运行的<span lang=EN-US> pods</span>。<span lang=EN-US><o:p></o:p></span></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'>考点：<span
lang=EN-US>cordon</span>和<span lang=EN-US>drain </span>命令的使用<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context ek8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get node<o:p></o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl cordon node02<o:p></o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl drain node02 --ignore-daemonsets<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>注意，还有一个参数<span lang=EN-US>--delete-emptydir-data --force</span>，这个考试时不用加，就可以正常<span
lang=EN-US>draini node02</span>的。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>但如果执行后，有跟测试环境一样的报错，则需要加上<span lang=EN-US>--delete-emptydir-data
--force</span>，会强制将<span lang=EN-US>pod</span>移走。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl drain node02
--ignore-daemonsets --delete-emptydir-data --force<o:p></o:p></span></p>





<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get node<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get pod -A -o wide<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>正常已经没有<span lang=EN-US>pod</span>在<span lang=EN-US>node02</span>上了。但测试环境里的<span
lang=EN-US>ingress</span>、<span lang=EN-US>flannel</span>、<span lang=EN-US>kube-proxy</span>是<span
lang=EN-US>daemonsets</span>模式的，所以显示还在<span lang=EN-US>node02</span>上，忽略即可。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<h1><span lang=EN-US>17</span>、排查集群中故障节点（真题第<span lang=EN-US>17</span>题）</h1>

<p class=MsoNormal>参考链接（没必要看）</p>

<p class=MsoNormal><span lang=EN-US><a
href="http://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/kubelet-integration"><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>http://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/kubelet-integration</span></a></span><span
lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;
mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>设置配置环境：<span lang=EN-US><o:p></o:p></span></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>[student@node-1] $ kubectl config
use-context wk8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><b><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>Task<o:p></o:p></span></b></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>名为<span lang=EN-US style='color:#0070C0'>node02</span>的<span
lang=EN-US>Kubernetes worker node</span>处于<span lang=EN-US style='color:#0070C0'>NotReady</span>状态。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>调查发生这种情况的原因，并采取相应的措施将<span lang=EN-US>node</span>恢复为<span
lang=EN-US style='color:#0070C0'>Ready</span>状态，确保所做的任何更改<span
style='color:#0070C0'>永久生效</span>。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>可以使用以下命令，通过<span lang=EN-US>ssh</span>连接到<span lang=EN-US>node02</span>节点：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>ssh node02<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>可以使用以下命令，在该节点上获取更高权限：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>sudo -i<o:p></o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='mso-ascii-font-family:等线;mso-ascii-theme-font:
minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>考试时执行，切换集群。模拟环境中不需要执行。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># kubectl config use-context wk8s<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>通过<span lang=EN-US> get nodes </span>查看异常节点，登录节点查看<span
lang=EN-US> kubelet </span>等组件的<span lang=EN-US> status </span>并判断原因。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>真实考试时，这个异常节点的<span lang=EN-US>kubelet</span>服务没有启动导致的，就这么简单。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#00B050'>模拟环境需要执行如下操作：<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#00B050'>因为上一题“节点维护”，已将<span lang=EN-US>node02</span>驱逐节点了，做这道题之前，我们要先将<span
lang=EN-US>node02</span>恢复回来。<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#7030A0'>kubectl uncordon node02<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>#</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#7030A0'>仅测试环境下执行，考试时不用做这步。<span lang=EN-US><o:p></o:p></span></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#00B050'>再模拟一下<span lang=EN-US>node02</span>异常。<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>ssh</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#00B050'>登录到<span lang=EN-US>node02</span>（<span
lang=EN-US>11.0.1.113</span>）上，然后执行 <span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#7030A0'>ssh node02<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>#</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#7030A0'>仅测试环境下执行，考试时不用做这步<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#7030A0'>systemctl stop kubelet ;
systemctl disable kubelet<span style='mso-spacerun:yes'>&nbsp; </span>#</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#7030A0'>仅测试环境下执行，考试时不用做这步<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:#7030A0'>exit<span
style='mso-spacerun:yes'>&nbsp; </span>#</span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast;color:#7030A0'>仅测试环境下执行，考试时不用做这步<span lang=EN-US><o:p></o:p></span></span></p>




<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>开始操作<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查一下<span lang=EN-US>node</span>，发现<span lang=EN-US>node02</span>异常<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get nodes<o:p></o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'># ssh</span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>到<span lang=EN-US>master</span>节点，并切换到<span
lang=EN-US>root</span>下<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>ssh node02<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>sudo -i<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>


<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查<span lang=EN-US>kubelet</span>服务，考试时，会发现服务没有启动<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>systemctl status kubelet<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'># </span><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>启动服务，<span style='color:red'>并设置为开机启动</span><span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>systemctl restart kubelet<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>systemctl enable kubelet<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>


<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>检查<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>systemctl status kubelet<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'># </span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>退出<span lang=EN-US>root</span>，退回到<span
lang=EN-US>student@node02<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>exit<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'># </span><span
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>退出<span lang=EN-US>node02</span>，退回到<span
lang=EN-US>student@node01<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast;color:red'>exit<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>不要输入<span lang=EN-US>exit</span>多了，否则会退出考试环境的。<span lang=EN-US><o:p></o:p></span></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='mso-ascii-font-family:
等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:等线;mso-hansi-theme-font:
minor-fareast'>再次检查节点， 确保<span lang=EN-US>node02</span>节点恢复<span lang=EN-US>
Ready </span>状态<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'>kubectl get nodes<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>



<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0cm;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span lang=EN-US
style='mso-ascii-font-family:等线;mso-ascii-theme-font:minor-fareast;mso-hansi-font-family:
等线;mso-hansi-theme-font:minor-fareast'><o:p>&nbsp;</o:p></span></p>

</div>

</body>

</html>
